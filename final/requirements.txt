# ============================================================================
# FISH SPEECH TTS - REQUIREMENTS
# ============================================================================
# Installation order matters! Follow the instructions below.

# ============================================================================
# STEP 1: Install PyTorch (CHOOSE ONE based on your hardware)
# ============================================================================
# 
# NVIDIA GPU (CUDA 12.1 - RTX 3000/4000 series):
# pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
#
# NVIDIA GPU (CUDA 11.8 - GTX 1000/RTX 2000 series):
# pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
#
# Apple Silicon (M1/M2/M3):
# pip install torch torchvision torchaudio
#
# CPU Only (No GPU):
# pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu
#
# After installing PyTorch, verify:
# python -c "import torch; print(f'CUDA: {torch.cuda.is_available()}')"
#
# ============================================================================
# STEP 2: Install remaining dependencies (run after PyTorch is installed)
# ============================================================================

# Core FastAPI backend
fastapi>=0.104.0
uvicorn[standard]>=0.30.0
python-multipart>=0.0.6

# UI frameworks
gradio>=5.0.0
streamlit>=1.28.0

# Audio processing
soundfile>=0.12.0
librosa>=0.10.1
pydub>=0.25.0
resampy>=0.4.3
descript-audio-codec
descript-audiotools

# NumPy (Fish Speech requires <=1.26.4)
numpy<=1.26.4

# Fish Speech core dependencies
transformers>=4.45.2
datasets==2.18.0
lightning>=2.1.0
hydra-core>=1.3.2
tensorboard>=2.14.1
natsort>=8.4.0
einops>=0.7.0
rich>=13.5.3
wandb>=0.15.11
grpcio>=1.58.0
kui>=1.6.0
loguru>=0.6.0
loralib>=0.1.2
pyrootutils>=1.0.4
einx[torch]==0.2.2
zstandard>=0.22.0
modelscope==1.17.1
opencc-python-reimplemented==0.1.7
silero-vad
ormsgpack
tiktoken>=0.8.0
pydantic==2.9.2
cachetools

# GPU monitoring (NVIDIA only)
pynvml>=11.5.0

# Quantization (optional, for memory optimization)
bitsandbytes>=0.41.0

# ONNX Runtime (optional, for CPU optimization)
# onnxruntime>=1.16.0  # CPU
# onnxruntime-gpu>=1.16.0  # GPU

# System utilities
python-dotenv>=1.0.0
psutil>=5.9.0
requests>=2.31.0

# ============================================================================
# INSTALLATION INSTRUCTIONS
# ============================================================================
#
# 1. Create virtual environment:
#    python -m venv venv312
#    source venv312/bin/activate  # Linux/macOS
#    venv312\Scripts\activate     # Windows
#
# 2. Install PyTorch (see STEP 1 above for your hardware)
#
# 3. Install remaining dependencies:
#    pip install -r requirements.txt
#
# 4. Install Fish Speech:
#    cd fish-speech
#    pip install -e .
#
# 5. Verify installation:
#    python -c "import torch; print(f'PyTorch: {torch.__version__}')"
#    python -c "import fish_speech; print('Fish Speech: OK')"
#
# ============================================================================
# TROUBLESHOOTING
# ============================================================================
#
# "No module named 'fish_speech'":
#   cd fish-speech && pip install -e .
#
# "CUDA out of memory":
#   Enable quantization in .env: QUANTIZATION=int8
#
# "numpy version conflict":
#   pip install "numpy<=1.26.4" --force-reinstall
#
# "transformers version conflict":
#   pip install "transformers>=4.45.2" --upgrade
#
# "pydantic version conflict":
#   pip install "pydantic==2.9.2" --force-reinstall
#
# ============================================================================
